<html>
<head>
<script language="javascript">
var inputFile = "";
function readURL(input)
{
	var file = input.files[0];
	var reader = new FileReader();
	reader.onload = function (e) {
		inputFile = e.target.result;
            go();
        }
	reader.readAsDataURL(file);
}
function getIndex(element)
{
	var e = document.getElementById(element);
	var choice = e.options[e.selectedIndex].value;
	switch(choice)
	{
		case "R": return 0;
		case "G": return 1;
		case "B": return 2;
		case "A": return 3;
		default: 0;
	}
}

function go()
{
	var img = new Image();
	img.src = inputFile;
	var canvas = document.getElementById('canvas');
	var ctx = canvas.getContext('2d');
	img.onload = function() {
		var maxHeight = 560;
		var scaleFactor = (img.height > maxHeight)? (maxHeight / img.height) : 1.0;

		canvas.width = img.width * scaleFactor;
		canvas.height = img.height* scaleFactor;
		ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
		img.style.display = 'none';

		var pixels = ctx.getImageData(0, 0, img.width, img.height);
		var data = pixels.data;
		var r_index = getIndex("r_select");
		var g_index = getIndex("g_select");
		var b_index = getIndex("b_select");
		var a_index = getIndex("a_select");

		for(var x = 0; x < img.width; ++x)
		{
			var colIndex = (x * img.height * 4);
			for(var y = 0; y < img.height; ++y)
			{
				var rowIndex = (y * 4);
				var pixelIndex = colIndex + rowIndex;
				var pixelCopy = [data[pixelIndex + 0], data[pixelIndex + 1], data[pixelIndex + 2] ,data[pixelIndex + 3]];

				data[pixelIndex + 0] = pixelCopy[ r_index ];
				data[pixelIndex + 1] = pixelCopy[ g_index ];
				data[pixelIndex + 2] = pixelCopy[ b_index ];
				data[pixelIndex + 3] = pixelCopy[ a_index ];
			}
		}
		ctx.putImageData(pixels, 0, 0, 0, 0, canvas.width, canvas.height);
		canvas.style.visibility = "visible";
	};
}
</script>
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<style>
body
{
	font-family: 'Roboto', sans-serif;
}

option
{
	font-family: 'Roboto', sans-serif;
}

.panel
{
	border: 1px solid black;
	background-color:white;
	padding:10px;
	width:680px;
	overflow:hidden;
	border-radius:10px;
}

.file_input
{
	margin-left:30px;
	border-left:1px solid black;
	padding-left:36px;
}

#canvas
{
	border : 1px solid black;
	visibility:hidden;
}
</style>
</head>
<body>
<div class="panel">
R = <select name="r_select" id="r_select" onchange="go()">
  <option value="R" selected="selected">R</option>
  <option value="G">G</option>
  <option value="B">B</option>
  <option value="A">A</option>
</select>
G = <select name="g_select" id="g_select" onchange="go()">
  <option value="R">R</option>
  <option value="G" selected="selected">G</option>
  <option value="B">B</option>
  <option value="A">A</option>
</select>
B = <select name="b_select" id="b_select" onchange="go()">
  <option value="R">R</option>
  <option value="G">G</option>
  <option value="B" selected="selected">B</option>
  <option value="A">A</option>
</select>
A = <select name="a_select" id="a_select" onchange="go()">
  <option value="R">R</option>
  <option value="G">G</option>
  <option value="B">B</option>
  <option value="A" selected="selected">A</option>
</select>
<input type="file" class="file_input" id="file_input" onchange="readURL(this)"/>
</div>
<br/>
<canvas id="canvas" width="0" height="0"></canvas>
</body>
</html>