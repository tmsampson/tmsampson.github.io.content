<html>
<head>

	<meta charset="UTF-8">
	<title>Interpolation</title>

	<link rel="stylesheet" href="../shared/shared.css">
	<script src="../shared/shared.js"></script>

	<link rel="stylesheet" href="../shared/third-party/jquery/jquery-ui.min.css">
	<script src="../shared/third-party/jquery/external/jquery/jquery.js"></script>
	<script src="../shared/third-party/jquery/jquery-ui.min.js"></script>

	<style>
	.circle
	{
		width:100px;
		height:100px;
		border-radius: 50px;
		taxt-align:middle;
		cursor: -webkit-grab; cursor: grab;
		font-weight:bold;
		font-size:26px;
		position:absolute;
	}
	.circleA
	{
		border: 2px solid #7f003b;
		color: #7f003b;
	}
	.circleB
	{
		border: 2px dashed #c5004a;
		color: #c5004a;
	}
	.circleA .label
	{
		position:relative;
		left:28px;
		top:34px;
	}
	.circleB .label
	{
		position:relative;
		left:55px;
		top:35px;
	}
	</style>

	<script language="javascript">
	var draggingA = false, draggingB = false;
	var circleA = null, circleB = null, line = null;
	function onBodyLoaded()
	{
		circleA = $(".circleA"); circleB = $(".circleB"); line = document.getElementById("line");
		circleA.draggable({ start: function() { draggingA = true; }, stop: function() { draggingA = false; } });
		circleB.draggable({ start: function() { draggingB = true; }, stop: function() { draggingB = false; } });
		setInterval(function() { onUpdate(); }, 16); // 60Hz
	}
	function onUpdate()
	{
		if(!draggingA)
		{
			var posA = getPosition(circleA); var posB = getPosition(circleB);
			var newPos = interpolate(posA, posB);
			setPosition(circleA, newPos[0], newPos[1]);
		}
	}
	function interpolate(posA, posB)
	{
		var deltaX = (posA[0] - posB[0]), deltaY = (posA[1] - posB[1]);
		var speed = 0.02; var lag = 1.0 - speed;
		var newX = (posA[0] * lag) + (posB[0] * speed);
		var newY = (posA[1] * lag) + (posB[1] * speed);
		return [ newX, newY ];
	}
	</script>
</head>

<body onload="onBodyLoaded()">
	<div class="circle circleA noselect"><div class="label">A</div></div><br/>
	<div class="circle circleB noselect"><div class="label">B</div></div>
</body>

</html>